environment:
  METEOR_PRETTY_OUTPUT: 0
  METEOR_DISABLE_OPTIMISTIC_CACHING: 1
  TOOL_NODE_FLAGS: --expose-gc
cache:
  - .meteor
  - dev_bundle
  - .babel-cache
platform:
  - x86
  - x64
install:
  - ps: Install-Product node 4
  - set CI=true
  - git submodule sync
  - ps: >-
      If(-not (git submodule update --init --recursive 2> $null)) {
        Remove-Item -ErrorAction Ignore -Recurse -Force .git\\config
        Remove-Item -ErrorAction Ignore -Recurse -Force .git\\modules
        git submodule deinit -f . 2> $null
        git submodule update --init --recursive
      }
build: off
matrix:
  fast_finish: true
test_script:
  - pwd
  - ls
  - ls packages\\
  - ls packages\\non-core\\
  - ls packages\\non-core\\blaze\\
  - ps: >-
      .\\meteor.bat npm install --global `
        phantomjs-prebuilt `
        browserstack-webdriver `

  - .\\meteor.bat self-test --list
  # - ./meteor --get-ready